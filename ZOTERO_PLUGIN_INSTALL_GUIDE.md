# 研学港 Zotero插件安装指南

## 📋 完成状态

✅ **文件夹整理完成**
- 删除了所有过时文件
- 保留了核心文件
- 创建了简化最终版

✅ **插件文件准备完成**
- `researchopia-simple-final.js` - 主插件文件
- `bootstrap-simple-final.js` - 启动文件
- `final-build/` - 构建目录包含所有必要文件

## 🚀 详细安装步骤

### 步骤1: 准备插件文件

我已经为您准备好了所有文件，位于 `zotero-plugin/final-build/` 目录中：

```
final-build/
├── researchopia.js          # 主插件文件
├── bootstrap.js             # 启动文件
├── manifest.json            # 插件配置
├── prefs.js                 # 偏好设置
├── icons/                   # 插件图标
│   ├── icon16.svg
│   ├── icon32.svg
│   ├── icon48.svg
│   ├── icon96.svg
│   └── icon128.svg
├── locale/                  # 多语言支持
│   ├── en-US/
│   └── zh-CN/
└── README.md               # 说明文档
```

### 步骤2: 创建XPI插件包

**方法1: 使用Windows资源管理器（推荐）**

1. 打开 `zotero-plugin/final-build/` 文件夹
2. 选择所有文件和文件夹（Ctrl+A）
3. 右键点击 → "发送到" → "压缩(zipped)文件夹"
4. 将生成的ZIP文件重命名为 `researchopia-simple-final.xpi`

**方法2: 使用PowerShell**

1. 打开PowerShell
2. 导航到 `zotero-plugin` 目录
3. 运行以下命令：
```powershell
Compress-Archive -Path "final-build\*" -DestinationPath "researchopia-simple-final.xpi" -Force
```

### 步骤3: 安装到Zotero

1. **打开Zotero**
2. **进入插件管理**：
   - 点击菜单 "工具" → "插件"
   - 或按快捷键 `Ctrl+Shift+A`
3. **安装插件**：
   - 点击右上角的齿轮图标 ⚙️
   - 选择 "从文件安装插件..."
   - 选择刚创建的 `researchopia-simple-final.xpi` 文件
4. **重启Zotero**：
   - 安装完成后重启Zotero

### 步骤4: 验证安装

1. **检查插件状态**：
   - 重新打开 "工具" → "插件"
   - 确认 "研学港 Researchopia" 插件已启用

2. **测试插件功能**：
   - 在Zotero中选择任意文献
   - 查看右侧面板是否显示 "研学港 Researchopia" 标签页
   - 检查插件界面是否正常显示

## 🔍 预期结果

安装成功后，您应该看到：

### 插件界面显示
- ✅ 标题："研学港 Researchopia"
- ✅ 副标题："学术标注分享平台 - 简化版"
- ✅ 状态指示器：显示连接状态和端口
- ✅ 用户认证区域：登录/登出按钮
- ✅ 操作按钮：同步、分享、浏览、刷新
- ✅ 文献信息：DOI、标题等

### 功能状态
- 🔄 端口检测：自动检测3000-3009端口
- 📊 状态显示：绿色圆点表示已连接
- 📝 文献信息：显示DOI和标题
- 🎨 界面样式：现代化设计，响应式布局

## 🛠️ 故障排除

### 问题1: 插件没有显示

**可能原因**：
- Zotero版本不兼容
- 插件文件损坏
- 安装过程出错

**解决方案**：
1. 检查Zotero版本（需要7.0或更高）
2. 重新创建XPI文件
3. 重新安装插件

### 问题2: 界面显示异常

**可能原因**：
- 文件加载失败
- 样式问题
- 脚本错误

**解决方案**：
1. 查看Zotero开发者工具（F12）
2. 检查控制台错误信息
3. 重新安装插件

### 问题3: 功能不工作

**可能原因**：
- 服务器未运行
- 网络连接问题
- 配置错误

**解决方案**：
1. 确保研学港服务器正在运行
2. 检查网络连接
3. 点击"刷新"按钮重新检测

## 📞 技术支持

如果按照上述步骤操作后仍有问题，请：

1. **收集信息**：
   - Zotero版本号
   - 操作系统版本
   - 具体错误信息

2. **查看日志**：
   - 打开Zotero开发者工具（F12）
   - 查看Console标签页的错误信息

3. **联系支持**：
   - 提供详细的错误描述
   - 附上截图或日志信息

## 🎯 下一步

插件安装成功后，您可以：

1. **测试基础功能**：验证插件界面和基本功能
2. **启动服务器**：运行 `npm run dev:full` 启动研学港服务
3. **测试连接**：点击"刷新"按钮检测服务器连接
4. **功能开发**：根据需要添加更多功能

---

**注意**：这是简化版插件，主要用于验证基础功能。一旦基础功能正常，我们可以逐步添加完整功能。
