# 管理员账号设置指南

本指南将帮助您创建和配置管理员账号。

## 步骤 1: 创建管理员账号

1. **注册账号**
   - 访问网站首页
   - 点击"注册"按钮
   - 使用您的教育邮箱注册（必须是 .edu.cn、.edu 等教育域名）
   - 建议使用邮箱：`admin@your-university.edu.cn`
   - 完成邮箱验证

2. **记录账号信息**
   - 邮箱：`admin@your-university.edu.cn`
   - 用户名：`admin`（或您选择的用户名）
   - 密码：请设置强密码

## 步骤 2: 配置数据库

1. **登录 Supabase 控制台**
   - 访问 [Supabase](https://supabase.com)
   - 进入您的项目

2. **运行管理员设置脚本**
   - 进入 "SQL Editor"
   - 打开 `database/admin-setup.sql` 文件
   - 将文件中的 `admin@university.edu.cn` 替换为您的实际管理员邮箱
   - 执行 SQL 脚本

3. **验证设置**
   ```sql
   -- 检查管理员角色是否设置成功
   SELECT email, username, role FROM public.users WHERE role = 'admin';
   ```

## 步骤 3: 测试管理员功能

1. **登录管理员账号**
   - 使用管理员邮箱和密码登录

2. **访问管理员控制台**
   - 点击右上角用户菜单
   - 选择"管理员控制台"
   - 或直接访问 `/admin` 页面

3. **验证功能**
   - 查看系统统计数据
   - 检查最近活动
   - 测试快速操作链接

## 管理员功能

### 当前可用功能

- **系统统计**: 查看用户、论文、评分、评论总数
- **活动监控**: 查看最新的论文、评论、评分活动
- **用户管理**: 查看和管理用户角色（开发中）
- **内容管理**: 管理论文和评论内容（开发中）

### 权限说明

管理员具有以下权限：
- 查看所有系统统计数据
- 删除任何论文、评论、评分
- 修改其他用户的角色（除了自己）
- 访问管理员专用页面和功能

## 安全注意事项

1. **密码安全**
   - 使用强密码（至少12位，包含大小写字母、数字、特殊字符）
   - 定期更换密码
   - 不要与他人分享管理员账号

2. **访问控制**
   - 仅在必要时使用管理员功能
   - 定期检查管理员账号列表
   - 及时移除不需要的管理员权限

3. **操作记录**
   - 重要操作前请三思
   - 删除操作不可恢复
   - 建议定期备份数据库

## 故障排除

### 无法访问管理员控制台

1. **检查角色设置**
   ```sql
   SELECT role FROM public.users WHERE email = 'your-admin-email@university.edu.cn';
   ```

2. **重新设置管理员角色**
   ```sql
   UPDATE public.users 
   SET role = 'admin' 
   WHERE email = 'your-admin-email@university.edu.cn';
   ```

3. **清除浏览器缓存**
   - 退出登录
   - 清除浏览器缓存和 Cookie
   - 重新登录

### 权限不足错误

1. **检查 RLS 策略**
   - 确保管理员相关的 RLS 策略已正确创建
   - 重新运行 `admin-setup.sql` 脚本

2. **检查函数权限**
   ```sql
   -- 测试管理员检查函数
   SELECT is_admin();
   SELECT get_user_role();
   ```

## 联系支持

如果遇到问题：
1. 检查浏览器控制台错误信息
2. 查看 Supabase 日志
3. 参考项目 README.md 和 DEPLOYMENT.md
4. 在 GitHub 项目中提交 Issue

## 下一步

设置完成后，您可以：
1. 邀请其他用户注册和使用平台
2. 添加示例论文数据进行测试
3. 配置更多管理员功能
4. 部署到生产环境

---

**重要提醒**: 管理员账号拥有系统最高权限，请妥善保管账号信息，谨慎使用管理功能。
