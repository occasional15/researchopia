# Researchopia Zotero插件 - 用户使用指南

## 📖 插件简介

Researchopia Zotero插件是一个强大的标注分享工具，让您能够：
- 🔍 自动检测PDF文档中的标注（高亮、笔记、下划线等）
- 🌐 将标注分享到Researchopia平台，实现跨用户协作
- 📚 支持DOI识别，自动关联文献元数据
- 🔄 支持离线模式，确保数据安全
- 🎨 美观的用户界面，集成到Zotero Item Pane

## 🚀 安装指南

### 系统要求
- Zotero 7.0 或更高版本
- Windows/macOS/Linux 操作系统
- （可选）Node.js 环境用于API服务器

### 安装步骤

1. **下载插件**
   - 从 [GitHub Releases](https://github.com/occasional15/researchopia/releases) 下载最新的 `.xpi` 文件
   - 或从 [zotero-chinese插件合集](https://plugins.zotero-chinese.com/) 获取

2. **安装到Zotero**
   - 打开Zotero
   - 菜单：工具 → 附加组件
   - 点击齿轮图标 → "Install Add-on From File..."
   - 选择下载的 `.xpi` 文件
   - 重启Zotero

3. **验证安装**
   - 选择任意包含PDF附件的文献条目
   - 在右侧Item Pane中应该看到"Researchopia"面板
   - 面板中显示插件状态和功能按钮

## 🎯 功能使用

### 标注检测与分享

1. **选择文献条目**
   - 在Zotero文献库中选择包含PDF附件的条目
   - 或直接选择PDF附件子项目

2. **检测标注**
   - 插件会自动检测PDF中的标注
   - 支持的标注类型：高亮、笔记、下划线、方框等
   - 状态显示：✅ 检测到 X 个标注

3. **分享标注**
   - 点击"分享标注"按钮
   - 插件会将标注转换为通用格式
   - 自动上传到Researchopia平台
   - 显示分享结果和状态

### 配置设置

1. **API服务器设置**
   - 默认地址：`http://localhost:3000/api/v1`
   - 支持端口自动检测（3000-3009）
   - 可在配置文件中修改

2. **离线模式**
   - 当API服务器不可用时自动启用
   - 标注数据保存在本地
   - 服务器恢复后可同步上传

## 🔧 高级功能

### DOI识别
- 自动从PDF元数据提取DOI
- 关联文献的学术信息
- 支持CrossRef API查询

### 批量处理
- 支持同时处理多个标注
- 智能去重和合并
- 进度显示和错误处理

### 数据格式
插件支持多种标注格式：
- Zotero原生格式
- 通用JSON格式
- 兼容其他标注工具

## 🛠️ 故障排除

### 常见问题

**Q: 插件显示"未检测到标注"**
A: 请确保：
- PDF文档确实包含标注（高亮、笔记等）
- 标注已正确保存到Zotero
- 重新打开PDF并保存标注

**Q: 无法连接到API服务器**
A: 检查：
- API服务器是否正在运行
- 端口是否被占用（默认3000）
- 防火墙设置是否阻止连接
- 使用离线模式作为备选

**Q: 图标不显示**
A: 尝试：
- 完全重启Zotero
- 重新安装插件
- 检查插件是否正确启用

**Q: 标注分享失败**
A: 可能原因：
- 网络连接问题
- API服务器错误
- 标注格式不支持
- 查看调试日志获取详细信息

### 调试模式

启用Zotero调试日志：
1. 帮助 → 调试输出记录
2. 启用调试输出
3. 重现问题
4. 查看日志中的"Researchopia"相关信息

## 📊 使用技巧

### 最佳实践

1. **标注规范**
   - 使用有意义的标注颜色
   - 添加详细的笔记说明
   - 避免过度重叠的标注

2. **性能优化**
   - 定期清理无用标注
   - 避免在大型PDF中创建过多标注
   - 使用固定API端口提高连接速度

3. **协作分享**
   - 确保团队使用相同的API服务器
   - 建立标注命名规范
   - 定期同步和备份数据

### 快捷操作

- **快速检测**：选择条目后插件自动检测标注
- **批量分享**：支持一次性分享多个文档的标注
- **状态监控**：实时显示分享进度和结果

## 🔄 更新日志

### v0.2.0 (当前版本)
- ✅ 修复标注检测逻辑，支持Zotero 8
- ✅ 改进API连接稳定性
- ✅ 优化用户界面和状态显示
- ✅ 增强错误处理和调试功能
- ✅ 支持更多标注类型

### v0.1.x (测试版本)
- 基础标注检测和分享功能
- DOI识别和元数据提取
- 离线模式支持

## 📞 支持与反馈

- **GitHub Issues**: [提交问题和建议](https://github.com/occasional15/researchopia/issues)
- **文档**: [在线文档](https://github.com/occasional15/researchopia)
- **社区**: [Zotero中文社区](https://zotero-chinese.com/)

## 📄 许可证

本插件基于MIT许可证开源，欢迎贡献代码和反馈。
