<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>研学港插件功能测试</title>
    <meta name="citation_doi" content="10.1038/s41467-025-62625-w">
    <meta name="citation_title" content="Advanced Neural Networks for Scientific Research">
    <meta name="citation_author" content="Zhang, L.; Wang, M.; Liu, S.">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            line-height: 1.6;
            background: #f8fafc;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-info {
            background: #e0f2fe;
            border: 1px solid #0284c7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .feature-list li:last-child {
            border-bottom: none;
        }
        .success { color: #16a34a; }
        .warning { color: #d97706; }
        .doi-box {
            background: #f0fdf4;
            border: 2px solid #22c55e;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
            text-align: center;
        }
        .instructions {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🔬 研学港插件功能测试</h1>
        <p>测试页面 - 模拟学术论文页面</p>
    </div>
    
    <div class="content">
        <h2>📄 论文信息</h2>
        <p><strong>标题：</strong>Advanced Neural Networks for Scientific Research</p>
        <p><strong>作者：</strong>Zhang, L.; Wang, M.; Liu, S.</p>
        <p><strong>期刊：</strong>Nature Communications (模拟)</p>
        
        <div class="doi-box">
            <strong>DOI: 10.1038/s41467-025-62625-w</strong>
        </div>
        
        <h3>摘要</h3>
        <p>这是一个测试页面，用于验证研学港浏览器插件的功能。本页面包含了标准的学术论文元数据，包括DOI号码，用于测试插件的DOI提取和自动搜索功能。</p>
    </div>
    
    <div class="test-info">
        <h3>🧪 插件功能测试</h3>
        <ul class="feature-list">
            <li><span class="success">✅ DOI检测</span> - 页面包含DOI元数据</li>
            <li><span class="success">✅ 悬浮图标</span> - 右上角应显示可拖拽图标</li>
            <li><span class="success">✅ 边缘吸附</span> - 拖拽图标会自动吸附到边缘</li>
            <li><span class="success">✅ 侧边栏打开</span> - 点击图标打开侧边栏</li>
            <li><span class="success">✅ 自动搜索</span> - 自动搜索检测到的DOI</li>
        </ul>
    </div>
    
    <div class="instructions">
        <h3>📋 测试步骤</h3>
        <ol>
            <li><strong>加载插件：</strong>在Edge中访问 edge://extensions/，加载研学港插件</li>
            <li><strong>查看图标：</strong>页面右上角应出现"🔬 研学港"悬浮图标，带绿色DOI指示器</li>
            <li><strong>测试拖拽：</strong>拖拽图标，松手时应自动吸附到左边或右边</li>
            <li><strong>点击图标：</strong>点击图标应打开侧边栏，自动搜索DOI号</li>
            <li><strong>验证搜索：</strong>侧边栏中应显示DOI信息并自动执行搜索</li>
        </ol>
    </div>
    
    <div class="content">
        <h3>🔧 故障排除</h3>
        <p><strong>如果图标不显示：</strong></p>
        <ul>
            <li>检查插件是否已启用</li>
            <li>刷新页面</li>
            <li>查看浏览器控制台是否有错误</li>
        </ul>
        
        <p><strong>如果侧边栏打开失败：</strong></p>
        <ul>
            <li>确保研学港服务器正在运行 (localhost:3000)</li>
            <li>检查Edge版本是否支持sidePanel API</li>
            <li>尝试点击浏览器工具栏中的插件图标</li>
        </ul>
    </div>
    
    <div class="content">
        <h3>🌐 相关链接</h3>
        <p>
            <a href="http://localhost:3000" target="_blank">🏠 研学港主页</a> | 
            <a href="https://www.nature.com/articles/s41467-025-62625-w" target="_blank">📄 真实论文链接</a>
        </p>
    </div>

    <script>
        // 页面加载完成后显示状态
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧪 测试页面已加载')
            console.log('📄 DOI信息:', document.querySelector('meta[name="citation_doi"]')?.content)
            
            // 检查插件是否加载
            setTimeout(() => {
                const pluginIcon = document.getElementById('researchopia-floating-icon')
                if (pluginIcon) {
                    console.log('✅ 研学港插件图标已检测到')
                } else {
                    console.log('⚠️ 未检测到研学港插件图标，请检查插件是否正确加载')
                }
            }, 2000)
        })
    </script>
</body>
</html>