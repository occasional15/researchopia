# 📰 论文报道管理系统 - 编辑删除功能 + PlumX集成

## 🆕 新增功能

### 1. 报道条目编辑删除功能

#### ✨ 功能特色
- **✏️ 在线编辑**: 点击编辑按钮直接修改报道信息
- **🗑️ 安全删除**: 带确认弹窗的删除功能
- **💾 实时保存**: 编辑后立即更新到数据库
- **🔒 权限控制**: 只能编辑删除属于当前论文的报道

#### 🎯 使用方法
1. 在论文详情页面找到"论文相关报道"部分
2. 每个报道条目右侧有编辑(✏️)和删除(🗑️)按钮
3. **编辑**: 
   - 点击编辑按钮进入编辑模式
   - 修改标题、URL、来源类型、作者、发布日期、描述
   - 点击保存(💾)确认更改或点击取消(❌)放弃
4. **删除**:
   - 点击垃圾桶图标
   - 在确认弹窗中点击"确定"删除

### 2. PlumX Analytics 集成

#### 📊 功能概述
- **学术影响力指标**: 显示论文的综合影响力数据
- **多维度指标**: 包括引用、下载、社交媒体提及、新闻报道等
- **实时数据**: 来自PlumX官方API的实时数据
- **智能显隐**: 无数据时自动隐藏或显示提示信息

#### 🎨 显示内容
- **Usage**: 下载量、浏览量、视频播放等
- **Captures**: 收藏、书签、代码库、数据集等  
- **Mentions**: 新闻、博客、维基百科、政策文件等
- **Social Media**: Twitter、Facebook等社交媒体提及
- **Citations**: 学术引用数据

#### ⚡ 技术实现
- 动态加载PlumX脚本避免冲突
- 支持自定义显示选项和样式
- 错误处理和回退机制
- 响应式设计适配各种屏幕

## 🚀 API接口扩展

### 新增API端点

#### PATCH `/api/papers/[id]/reports`
更新报道信息
```typescript
{
  reportId: string,
  title: string,
  url: string,
  source: 'wechat' | 'news' | 'blog' | 'other',
  author?: string,
  publish_date?: string,
  description?: string
}
```

#### DELETE `/api/papers/[id]/reports?reportId={id}`
删除指定报道
- 使用查询参数传递reportId
- 只能删除属于当前论文的报道
- 返回操作成功确认

## 🧪 演示页面

访问 `/demo` 页面体验完整功能:
- **数据管理**: 初始化、重置、清除示例数据
- **PlumX演示**: 展示不同类型的PlumX widget
- **编辑删除测试**: 完整的报道管理功能测试

## 🔧 技术架构

### 前端组件
- `PaperReports.tsx`: 增强的报道列表组件，支持编辑删除
- `PlumXWidget.tsx`: 新建的PlumX集成组件
- 状态管理: useState管理编辑状态和表单数据

### 后端API
- 扩展现有reports路由支持PATCH和DELETE方法
- 数据验证和错误处理
- 支持事务性操作确保数据一致性

### 数据库
- 利用现有paper_reports表结构
- 支持更新和删除操作
- 维护数据完整性约束

## 📋 使用指南

### 开发环境测试
1. 启动开发服务器: `npm run dev`
2. 访问 `http://localhost:3001/demo`
3. 点击"初始化示例数据"加载测试数据
4. 测试各项功能

### 生产环境部署
1. 确保数据库支持更新和删除操作
2. 配置PlumX API访问权限
3. 验证所有API端点正常工作
4. 测试权限控制和数据安全

## 🎉 功能亮点

✅ **无缝集成**: 新功能完美融入现有界面  
✅ **用户友好**: 直观的编辑界面和确认机制  
✅ **数据安全**: 完整的验证和权限控制  
✅ **国际标准**: 采用PlumX国际学术指标标准  
✅ **响应式设计**: 支持桌面和移动端  
✅ **错误处理**: 完善的异常处理和用户提示

## 🔮 未来规划

- [ ] 批量操作: 支持选中多个报道进行批量编辑/删除
- [ ] 历史记录: 保存编辑历史和版本控制
- [ ] 高级筛选: 更多维度的报道筛选和排序
- [ ] 数据导出: 支持导出报道数据为Excel/CSV
- [ ] API配额管理: PlumX API调用次数监控和优化

---

*🎯 本次更新显著提升了系统的实用性和学术价值，为研究者提供了更完整的论文影响力评估工具！*