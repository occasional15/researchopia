# 🚀 快速功能测试指南

## 📋 管理员账号信息
- **邮箱**: `admin@test.edu.cn`
- **密码**: `Admin123!@#`
- **用户名**: `admin`

## 🔧 快速设置步骤

### 1. 注册管理员账号
1. 访问: http://localhost:3000
2. 点击右上角"注册"
3. 使用上述管理员信息注册
4. 完成注册流程

### 2. 设置管理员权限
在 Supabase SQL Editor 中执行：
```sql
UPDATE public.users 
SET role = 'admin' 
WHERE email = 'admin@test.edu.cn';
```

### 3. 添加测试数据（可选）
```bash
cd academic-rating
node setup-admin.js
```

## 🧪 核心功能测试

### ✅ 1. DOI搜索测试（重点功能）

**测试地址**: http://localhost:3000/papers/new

**测试DOI**:
- `10.1038/nature17946` ⭐ 推荐测试
- `10.1126/science.aaf2654`
- `10.1038/s41586-019-1666-5`

**测试步骤**:
1. 在DOI搜索框输入: `10.1038/nature17946`
2. 点击"搜索DOI"
3. **预期结果**: 自动获取论文信息并显示预览
4. 点击"立即查看"或等待自动跳转

**快速测试**: 点击页面下方的示例DOI按钮

### ✅ 2. 评分功能测试（重点功能）

**前提**: 已通过DOI搜索添加了论文

**测试步骤**:
1. 进入任一论文详情页
2. 滚动到评分区域
3. 设置评分:
   - 创新性: 5分 ⭐⭐⭐⭐⭐
   - 方法论: 4分 ⭐⭐⭐⭐
   - 实用性: 5分 ⭐⭐⭐⭐⭐
   - 总体评价: 5分 ⭐⭐⭐⭐⭐
4. 点击"提交评分"
5. **预期结果**: 评分成功，页面显示更新

### ✅ 3. 评论和点赞测试（重点功能）

**测试步骤**:
1. 在论文详情页发表评论: "这是一篇非常优秀的论文！"
2. 点击"发表评论"
3. **预期结果**: 评论出现在评论列表
4. 对评论进行点赞 👍
5. **预期结果**: 点赞数增加，按钮变为选中状态
6. 再次点击点赞
7. **预期结果**: 取消点赞
8. 点击踩 👎
9. **预期结果**: 踩数增加

### ✅ 4. 管理员功能测试

**测试步骤**:
1. 使用管理员账号登录
2. 点击右上角用户头像
3. **预期结果**: 菜单中显示"管理员控制台"
4. 访问: http://localhost:3000/admin
5. **预期结果**: 显示管理员仪表板和统计数据
6. 测试删除评论功能（管理员可删除任何评论）

### ✅ 5. 访客模式测试

**测试步骤**:
1. 退出登录
2. 访问任一论文详情页
3. **预期结果**: 可以查看内容
4. 尝试评分
5. **预期结果**: 显示"登录以评分"
6. 尝试评论
7. **预期结果**: 显示"登录以发表评论"按钮

### ✅ 6. 教育邮箱验证测试

**测试邮箱**:
- ✅ `test@stanford.edu` (应该通过)
- ✅ `user@tsinghua.edu.cn` (应该通过)
- ❌ `user@gmail.com` (应该被拒绝)

**测试步骤**:
1. 尝试用非教育邮箱注册
2. **预期结果**: 显示错误提示

## 🎯 重点测试场景

### 场景1: 完整的论文评价流程
1. DOI搜索 → 2. 查看论文 → 3. 评分 → 4. 评论 → 5. 点赞

### 场景2: 管理员管理流程
1. 登录管理员 → 2. 查看控制台 → 3. 删除不当评论

### 场景3: 访客体验流程
1. 未登录访问 → 2. 浏览内容 → 3. 尝试互动 → 4. 引导登录

## 🐛 常见问题排查

### 问题1: DOI搜索无响应
**解决**: 检查网络连接，使用测试DOI `10.1038/nature17946`

### 问题2: 管理员控制台无法访问
**解决**: 确认已执行管理员权限设置SQL

### 问题3: 评论点赞不工作
**解决**: 检查数据库是否执行了完整的schema.sql

### 问题4: 注册被拒绝
**解决**: 确保使用教育邮箱（.edu, .edu.cn, .ac.uk等）

## 📊 测试检查清单

- [ ] DOI搜索成功获取论文信息
- [ ] 多维度评分功能正常
- [ ] 评论发表和显示正常
- [ ] 评论点赞/踩功能正常
- [ ] 管理员控制台可访问
- [ ] 管理员删除权限正常
- [ ] 访客模式限制正确
- [ ] 教育邮箱验证正确
- [ ] 搜索功能正常
- [ ] 页面响应速度良好

## 🎉 测试完成后

如果所有功能测试通过，您的学术评价网站已经可以投入使用！

**下一步建议**:
1. 部署到生产环境
2. 邀请真实用户测试
3. 收集用户反馈
4. 持续优化功能

---

**需要帮助?** 
- 检查浏览器控制台错误
- 查看 Supabase 项目日志
- 参考完整的 TESTING_GUIDE.md
