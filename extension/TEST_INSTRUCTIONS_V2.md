# 🧪 研学港扩展测试指令

## 📋 测试前准备

1. **重新加载扩展**
   - 在Chrome浏览器中打开 `chrome://extensions/`
   - 找到"研学港 Researchopia"扩展
   - 点击"刷新"按钮重新加载扩展

2. **检查扩展状态**
   - 确认扩展图标在工具栏中显示正常（蓝色背景，白色R字母）
   - 确认扩展状态为"已启用"

## 🎯 核心功能测试

### ✅ 测试1: 浮动图标显示与点击
1. 打开任意学术网站（如 arxiv.org, scholar.google.com）
2. 等待页面加载完成
3. **预期结果**: 页面右下角应该出现蓝色的浮动DOI检测图标

4. **点击浮动图标**
5. **预期结果**: 
   - 扩展徽章显示"✅"（如果成功打开侧边栏）
   - 或显示"DOI"（如果需要手动点击扩展图标）
   - 侧边栏应该自动打开（这是本次修复的核心功能）

### ✅ 测试2: 侧边栏功能
1. 如果侧边栏没有自动打开，点击浏览器工具栏中的扩展图标
2. **预期结果**: 侧边栏打开，显示研学港界面
3. 在侧边栏中应该能看到检测到的DOI信息（如果有）

### ✅ 测试3: DOI检测准确性
1. 访问包含DOI的学术论文页面，例如：
   - https://arxiv.org/abs/2301.07041
   - https://www.nature.com/articles/s41586-021-03819-2
2. 点击浮动图标
3. **预期结果**: 侧边栏中应该显示检测到的DOI

## 🔧 问题排查

### 如果浮动图标不显示：
- 检查控制台是否有JavaScript错误
- 确认扩展权限已正确授权
- 尝试刷新页面

### 如果点击浮动图标后侧边栏不自动打开：
- 检查控制台中的消息，应该看到"✅ 侧边栏已自动打开"
- 如果看到"⚠️ 无法自动打开侧边栏，可能是用户手势限制"，这是正常的Chrome安全限制
- 此时应该看到扩展徽章显示"DOI"，手动点击扩展图标即可打开侧边栏

### 如果图标显示异常：
- 确认icons文件夹中有所有PNG文件
- 如果仍有问题，可以使用 `png-generator.html` 重新生成真正的PNG图标文件

## 🚀 成功标准

本次修复的核心目标是解决"浮动图标点击后侧边栏不自动打开"的问题。

**✅ 完全成功**: 点击浮动图标后，侧边栏立即自动打开，扩展徽章显示"✅"

**⚠️ 部分成功**: 由于Chrome的用户手势限制，侧边栏无法自动打开，但扩展徽章正确显示"DOI"，用户手动点击扩展图标可正常打开侧边栏

**❌ 失败**: 点击浮动图标无任何反应，或出现错误

## 📈 性能验证

- 扩展加载时间 < 2秒
- 浮动图标响应时间 < 1秒
- 侧边栏打开时间 < 1秒
- 内存占用 < 50MB

## 🔍 调试信息

打开Chrome开发者工具的控制台，应该看到类似信息：
```
🎯 处理浮动图标点击，tab: 123, doi: 10.1234/example
💾 已保存DOI到storage: 10.1234/example
✅ 侧边栏已自动打开
```

或者：
```
🎯 处理浮动图标点击，tab: 123, doi: 10.1234/example  
💾 已保存DOI到storage: 10.1234/example
⚠️ 无法自动打开侧边栏，可能是用户手势限制
💡 已设置扩展图标徽章，请手动点击扩展图标打开侧边栏
```